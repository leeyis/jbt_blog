{% load markdown_extras %}
{% for post in post_list %}
    <div class="post-container">
        <section class="post">
            <header class="post-header">
                <div class="post-content-wrapper">
                    <h2 class="post-title">
                        <a href="{% url 'detail' id=post.id %}" style="text-decoration: none">
                            {{ post.title }}
                        </a>
                    </h2>
                    <div class="post-meta">
                        <span class="meta-item">
                            <i class="fa fa-calendar"></i>
                            {{ post.pub_time|date:'Y年m月d日' }}
                        </span>
                        {% if post.category %}
                        <span class="meta-item">
                            <i class="fa fa-list-alt"></i>
                            {{ post.category }}
                        </span>
                        {% endif %}
                        <span class="meta-item">
                            <i class="fa fa-eye"></i>
                            {{ post.views }}次浏览
                        </span>
                    </div>
                </div>
            </header>
            <div class="post-summary">
                <p>
                    {{ post.content|markdown_truncate:400 }}
                </p>
            </div>
            <div>
                <a class="post-category post-category-design" href="{% url 'detail' id=post.id %}"
                   style="text-decoration: none">阅读全文</a>
            </div>
        </section>
    </div>
{% empty %}
    <div class="empty-posts-state">
        <div class="empty-posts-content">
            <i class="fa fa-file-text-o"></i>
            <h3>暂无文章</h3>
            <p>这里还没有发布任何文章，请稍后再来查看。</p>
        </div>
    </div>
{% endfor %}

{% if post_list.has_next %}
    <div id="infinite-scroll-trigger" data-next-page="{{ post_list.next_page_number }}">
        <p style="text-align: center; color: #999; padding: 1rem 0;">正在加载更多文章...</p>
    </div>
{% endif %} 